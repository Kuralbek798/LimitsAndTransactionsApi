# LimitsAndTransactionsApi

Создать микросервис, который включает два API, клиент для работы с внешним API
и базу данных для хранения данных о бизнесе и валютных курсах.
Требования.
1. Структура сервиса. Сервис должен содержать два REST API:
a. Для обработки транзакций (условная интеграция с банковскими сервисами).
b. Клиентский API для внешних запросов: получение списка транзакций,
превысивших лимит, установление нового лимита, получение всех лимитов.
2. Документация и контейнеризация. Необходимо:
a. Описать шаги по запуску сервиса в файле README.md
b. Подготовить сервис к запуску в Docker, желательно добавить Docker
Compose.
3. База данных.
a. Выбрать любую реляционную БД. Разработать модель данных
самостоятельно. Пример в конце задания.
b. Включить скрипты миграций БД в репозиторий. 
4. Тестирование и публикация.
a. Написать один юнит тест 
b. Опубликовать работу на GitHub.
Описание задания:
Необходимо разработать микросервис со следующей функциональностью:
1. Запись транзакций: Получать и сохранять информацию о каждой расходной
операции в разных валютах, таких как тенге, рубли в базе данных.
2. Месячный лимит расходов: Хранить месячный лимит по расходам в долларах
США (USD) для двух категорий расходов: товары и услуги.
3. Получение курсов валют: Запрашивать дневные курсы валютных пар KZT/USD и
RUB/USD. Сохранять эти курсы в базе данных, используя данные закрытия (close).
Если данные на текущий день недоступны (например, выходной), использовать
данные последнего закрытия (previous_close). Рассчитывать сумму расходов в USD
нужно по курсу на день расхода или по последнему доступному курсу. Апи с
курсами валют выбрать самостоятельно: twelvedata.com alphavantage.co
openexchangerates.org или любое другое.
полученные курсы валют следует сохранять в своей базе данных и использовать их
в первую очередь, чтобы не делать лишние запросы в сервис.
4. Флаг превышения лимита: Помечать транзакции, превысившие месячный лимит,
флагом limit_exceeded. Дефолтный месячный лимит взять за $1000, который
сбрасывается первого числа каждый месяц.
Новый лимит не должен влиять на старые транзакции. Например, если лимит 1000
USD был установлен 1.01.2022 и превышен двумя транзакциями на 500 и 600 USD,
то у второй транзакции должен быть флаг limit_exceeded = true. Если пользователь
установил новый лимит 11.01.2022 и совершил третью транзакцию на 100 USD
12.01.2022, у нее должен быть флаг limit_exceeded = false.
5. Установка нового лимита: Позволять клиентам устанавливать новый лимит
расходов. При установке нового лимита автоматически записывать текущую дату.
Не допускать установку даты в прошлом или будущем. Запрещать обновление
существующих лимитов.
6. Отчет о превышении лимита: Предоставлять клиентам список транзакций,
превысивших лимит, с указанием суммы лимита, валюты (USD) и даты
установления.
